
@{
    ViewBag.Title = "PaymentToBook";
    Layout = "~/Views/Shared/_MemberLayout.cshtml";
    int menid = ViewBag.MentorId;
    int scheduleid = ViewBag.ScheduleId;
    int slotid = ViewBag.SlotId;
    //  var viewobj = ViewData.Model;
    //var datt = viewobj.Mdate;
    string dd = ViewBag.Mdate;

}
<!-- Page Content -->
<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="row">
                    <div class="col-12">
                        <a href="javascript:void(0);" id="toggle_btn">
                            <i class="fa fa-bars"></i>
                        </a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-7 col-lg-8">
                        <div class="card">
                            <div class="card-body">

                                <!-- Checkout Form -->
                                <form action="/Member/BookingConfirmation">

                                    <!-- Personal Information
                                    <div class="info-widget">
                                        <h4 class="card-title">Personal Information</h4>
                                        <div class="row">
                                            <div class="col-md-6 col-sm-12">
                                                <div class="form-group card-label">
                                                    <label>First Name</label>
                                                    <input class="form-control" type="text">
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-12">
                                                <div class="form-group card-label">
                                                    <label>Last Name</label>
                                                    <input class="form-control" type="text">
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-12">
                                                <div class="form-group card-label">
                                                    <label>Email</label>
                                                    <input class="form-control" type="email">
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-12">
                                                <div class="form-group card-label">
                                                    <label>Phone</label>
                                                    <input class="form-control" type="text">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="exist-customer">Existing Customer? <a href="#">Click here to login</a></div>
                                    </div>
                                     /Personal Information -->

                                    <div class="payment-widget">
                                        <h4 class="card-title">Payment Method</h4>

                                        <div class="payment-list">
                                            <label class="payment-radio  ">
                                                <input type="radio" name="radio" checked>
                                                <span class="checkmark "></span>
                                                My Wallet

                                            </label>
                                        </div>



                                        <!-- Credit Card Payment -->
                                        <div class="payment-list">
                                            <label class="payment-radio credit-card-option text-muted">
                                                <input type="radio" name="radio" disabled>
                                                <span class="checkmark"></span>
                                                Credit card
                                            </label>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group card-label">
                                                        <label for="card_name">Name on Card</label>
                                                        <input class="form-control" id="card_name" type="text" disabled>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group card-label">
                                                        <label for="card_number">Card Number</label>
                                                        <input class="form-control" id="card_number" placeholder="---- ---- ---- ----" type="text" disabled>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group card-label">
                                                        <label for="expiry_month">Expiry Month</label>
                                                        <input class="form-control" id="expiry_month" placeholder="MM" type="text" disabled>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group card-label">
                                                        <label for="expiry_year">Expiry Year</label>
                                                        <input class="form-control" id="expiry_year" placeholder="YY" type="text" disabled>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group card-label">
                                                        <label for="cvv">CVV</label>
                                                        <input class="form-control" id="cvv" type="text" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- /Credit Card Payment -->
                                        <!-- Paypal Payment -->
                                        <div class="payment-list">
                                            <label class="payment-radio paypal-option text-muted">
                                                <input type="radio" name="radio" disabled>
                                                <span class="checkmark "></span>
                                                Paypal
                                            </label>
                                        </div>
                                        <!-- /Paypal Payment -->
                                        <!-- Terms Accept -->
                                        <div class="terms-accept">
                                            <div class="custom-checkbox">
                                                <input type="checkbox" id="terms_accept" onchange="document.getElementById('confirm').disabled = !this.checked;">
                                                <label for="terms_accept">I have read and accepted <a href="#">Terms &amp; Conditions</a></label>
                                            </div>
                                        </div>
                                        <!-- /Terms Accept -->
                                        <!-- Submit Section -->
                                        <div class="submit-section mt-4">
                                            <button type="submit" class="btn btn-primary submit-btn" id="confirm">Confirm and Pay</button>
                                        </div>
                                        <!-- /Submit Section -->

                                    </div>
                                </form>
                                <!-- /Checkout Form -->

                            </div>
                        </div>

                    </div>

                    <div class="col-md-5 col-lg-4">

                        <!-- Booking Summary -->
                        <div class="card booking-card">
                            <div class="card-header">
                                <h4 class="card-title">Booking Summary</h4>
                            </div>
                            <div class="card-body">

                                <!-- Booking Mentee Info -->
                                <div class="booking-user-info">
                                    <!--  <a href="payment-mentee.html" class="booking-user-img">
                                         <img src="~/assets/img/user/user2.jpg" alt="User Image">
                                     </a>
                                     <div class="booking-info">
                                         <h4><a href="payment-mentee.html">Darren Elder</a></h4>
                                         <div class="rating">
                                             <i class="fas fa-star filled"></i>
                                             <i class="fas fa-star filled"></i>
                                             <i class="fas fa-star filled"></i>
                                             <i class="fas fa-star filled"></i>
                                             <i class="fas fa-star"></i>
                                             <span class="d-inline-block average-rating">35</span>
                                         </div>
                                         <div class="mentor-details">
                                             <p class="user-location"><i class="fas fa-map-marker-alt"></i> Newyork, USA</p>
                                         </div>
                                     </div> -->
                                </div>
                                <!-- Booking Mentee Info -->

                                <div class="booking-summary">
                                    <div class="booking-item-wrap">
                                        <ul class="booking-date">
                                            <!-- <li>Date <span>16 Nov 2019</span></li>
                                            <li>Time <span>10:00 AM</span></li>-->
                                            <li>Date <span> @dd </span></li>
                                        </ul>
                                        <!--  <ul class="booking-fee">
                                              <li>Consulting Fee <span>$100</span></li>
                                              <li>Booking Fee <span>$10</span></li>
                                              <li>Video Call <span>$50</span></li>
                                          </ul>-->
                                        <div class="booking-total">
                                            <ul class="booking-total-list">
                                                <li>
                                                    <span>Total</span>
                                                    <span class="total-cost" id="total"></span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /Booking Summary -->

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    var myd = " " +@dd;
</script>
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script>

    $(document).ready(function () {
        var $ment_id=@menid;
        $.ajax({
            url: '@Url.Action("GetSelectedMember", "Member")',
            type: 'POST',
            data: { memberid: $ment_id },
            success: function (data) {
                $(data).each(function (Value, Text) {
                    debugger
                    var n = Text.FirstName + " "+ Text.LastName;

                    $('.booking-user-info').append('<a href="profile.html" class="booking-user-img">' +
                        '<img src="' + Text.PhotoURL + '" alt="User Image">' +
                        '</a>' +
                        ' <div class="booking-info">' +
                        '<h4><a href="profile.html">' + n + '</a></h4>' +
                        '<p>Career Level: <b>' + Text.CareerLevelName + '</b></p>' +
                        '<p>Rate/hr: <b>' + Text.MemberCurrentRate + '<span>$</span></b></p>' +
                        '</div>');

                });
            }
            });

        @{
      var em = ViewBag.Mdate;
   }

    debugger
    var $mydate=@dd.ToString();

    });





    var detail_day, detail_start, detail_Duration, detail_Amount;
     $.ajax({
            url: '@Url.Action("GetMeeting_Detail", "Member")',
            type: 'POST',
         data: { sch:@scheduleid,sl:@slotid, menid: @menid },
            success: function (data) {
                $(data).each(function (Value, Text) {
                    debugger
                    detail_day = Text.Day;
                    detail_start = Text.StartTime;
                    detail_Duration = Text.Duration;
                        detail_Amount = Text.TotalAmount;
                    $('.booking-date').append(
                        '<li>Day <span>' + detail_day + '</span ></li >' +
                        '<li>Time <span>' + detail_start.substring(0, 5) + '</span></li>'+
                        '<li>Duration <span>' + detail_Duration + ' Mins</span></li>'
                    );
                    $('#total').append(
                         detail_Amount+' $'  );


                });
            }
            });





     var m = "@ViewBag.Mdate";
     $('#confirm').on('click', function () {
            debugger
             $.ajax({
                    url: '@Url.Action("Add_Booking", "Member")',
                 type: 'POST',
                 data: {
                     schid: @scheduleid, slid: @slotid, menid:@menid, meetingdate: m, tamount: detail_Amount },
                    success: function (data) {
                        debugger
                        alert('Sucessfully added!!!');
                 },
                 error: function () {

                     alert('Failed!!!');
                 }
                });


        });

</script>
